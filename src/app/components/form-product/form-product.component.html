<div class="container">
  <form [formGroup]="productForm">
    <mat-form-field floatLabel="always">
      <mat-label>Nome</mat-label>
      <input matInput type="text" formControlName="name" class="right-align" />
      @if (productForm.controls['name'].hasError('required')) {
      <mat-error>Nome é <strong>obrigatório</strong></mat-error>
      }
    </mat-form-field>

    <mat-form-field floatLabel="always">
      <mat-label>Descrição</mat-label>
      <input matInput type="text" formControlName="desc" class="right-align" />
      @if (productForm.controls['desc'].hasError('required')) {
      <mat-error>Descrição é <strong>obrigatório</strong></mat-error>
      }
    </mat-form-field>

    <mat-form-field floatLabel="always">
      <mat-label>Preço</mat-label>
      <input matInput type="number" formControlName="price" class="right-align" placeholder="0" />
      @if (productForm.controls['price'].hasError('required')) {
      <mat-error>Preço é <strong>obrigatório</strong></mat-error>
      }
    </mat-form-field>

    <button *ngIf="!id; else updatedImg" mat-flat-button floatLabel="always" (click)="onFileInput()"
      class="button">Selecionar Imagem</button>
    <input type="file" (change)="onFileChange($event)" accept="image/*" style="display: none;" #fileInput>

    <div>
      <button *ngIf="!id; else updatedProduct" mat-flat-button [disabled]="productForm.invalid"
        (click)="createProduct(productForm.value)" class="button">Novo</button>
      <button mat-flat-button (click)="goToHome()" class="button">Cancelar</button>
    </div>
  </form>
</div>

<ng-template #updatedProduct>
  <button mat-flat-button [disabled]="productForm.invalid" (click)="updateProduct(productForm.value)"
    class="button">Atualizar</button>
</ng-template>

<ng-template #updatedImg>
  <button mat-flat-button floatLabel="always" (click)="onFileInput()" class="button">Atualizar Imagem</button>
</ng-template>